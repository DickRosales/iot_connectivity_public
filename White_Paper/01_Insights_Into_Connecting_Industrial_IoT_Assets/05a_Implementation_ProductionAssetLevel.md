[< Chapter 4: Type of Communication](04_Type_of_Communication.md)

## 5 Implementation
### 5.1	Production Asset Level
The primary purpose of the production assets on the shop floor is to run and optimize the manufacturing processes. They produce or are capable of producing massive amounts of data, and they are the primary source of telemetry data that is available within any level of the technology stack.

At the OT level, there are many different protocols. Specialized real-time protocols (like Profinet or Powerlink) are often not compatible with the IT systems since the first group often has different ISO / OSI Layers then the standard Ethernet protocol, commonly used by IT systems. For the connection between OT and IT levels, two standards have developed a wide adoption in the last years: OPC UA (Open Platform Communications Unified Architecture) and MQTT (Message Queuing Telemetry Transport). Both protocols are seen as a common factory standard since they are vendor and hardware independent. There are also open-source implementations for a variety of platforms. Most OT device manufacturers have included at least one of these two protocols in their state-of-the-art products. This is the reason why this working group mainly focuses on these two protocols.

OPC UA should be considered a connectivity implementation because of its widespread use in the manufacturing sector, self-describing behavior, data semantic standardization groups, and support for modern security standards. The OPC UA Foundation standardizes data exchange as a platform-independent, service-oriented architecture (SOA). Many forward-looking implementations such as OPC UA pub/sub and OPC UA over TSN are specified. However, this whitepaper focuses on the OPC UA client/server variant, as it is currently the most widespread. If the implementation of OPC UA is not reasonable or applicable, the use of MQTT as a transport protocol is a valid alternative. The choice of data formats and transport protocols should be considered based on the specific use case. For example, for a lightweight IoT sensor, a complex OPC UA implementation may not be possible due to hardware limitations.

Due to high adaptation costs in operational production facilities, there are still many legacy protocol standards, which have been in use for more than 20 years (e.g., Siemens S7 protocol). If OPC UA or MQTT is not natively supported, an adapter on the production asset level is a good solution to transform data from the proprietary asset interface to OPC UA or MQTT. An alternate solution is the installation of a software adapter at the edge level where the data is filtered, combined, and converted to the northbound edge protocol (MQTT). The overall goal is to transform and harmonize the data as early as possible in the communication process.

On the communication side, telemetry is typically passed to the higher network levels. Only minimal processing, filtering, compressing, and aggregating are done at the asset level. Instead, the machines are configured to efficiently pass information to other assets optimized for these compute-heavy functions, e.g., edge nodes.

In most circumstances, the shop floor machines are recipients of control and management information, acting on commands passed down from higher levels and generated from more complex and comprehensive models. Besides the “traditional” control mechanisms via PLCs, there is also the possibility of having a control model at the edge level. An example could be a machine learning model that evaluates telemetry data and sends control commands (e.g., updated parameters) via the edge adapter down to the asset. Device management communication is used to discover endpoints and specify which data points should be streamed in the telemetry messages. Also, the management of the device’s firmware lies in this domain. Security is the third aspect, with the possibility to set and change encryption mechanisms and security tokens (e.g., X.509 certificates).

Device management must keep the firmware of production assets up to date to secure the production assets, but the primary action necessary to minimize the attack vector is to use firewalls that deny access in general.

[Chapter 5.2: Implementation - Edge Level >](05b_Implementation_EdgeLevel.md)
